/*
    JSModel
    Copyright (c) 2014 Chad Kuehn (chadkuehn.com)
    Licensed under the MIT license (https://github.com/chadkuehn/JSModel/blob/master/LICENSE.txt)
    Version: 1.0.5
*/

 function JSModel(){var b="";var a;if(!(function(e){var f=false;if(e.length>0){if(typeof e[0]==="object"){a=e[0];if(e.length>1){if(typeof e[1]==="string"){b=e[1];f=true}}else{f=true}}}return f}(arguments))){return}this.refresh=d;this.prop=c;function c(e){var f;if(e in a){f=a[e]}return f}function d(){var j={};for(var i in a){var f=$("[name='"+i+"']");var h="";if(f.is("input")){h=f.attr("type")}else{if(f.is("select")){h="select"}else{if(f.is("textarea")){h="textarea"}}}switch(h){case"select":case"textarea":case"text":case"password":case"hidden":case undefined:if($.isArray(a[i])){a[i]=f.map(function(){return this.value}).get()}else{a[i]=f.val()}break;case"radio":a[i]=f.closest(":checked").val();break;case"checkbox":a[i]=f.closest(":checked").map(function(){return this.value}).get();break}var g=[];$("[name ^= '"+i+"['][name *= ']'").each(function(){var o=$(this);var u=o.attr("name");var v=o.val();if(o.is("input")){if(o.attr("type")=="checkbox"){if(o.is(":checked")){g.push(u)}return}}if(g.indexOf(u)>-1){v="true"}if(!isNaN(v)){if(v.indexOf(".")>-1){v=parseInt(v,10)}else{v=parseFloat(v,10)}}else{if((v=="true")||(v=="false")){v=(v=="true"?true:false)}}var r=/\[(\d)\]/g;var q=r.exec(u);var k=[];while(q!=null){k.push(parseInt(q[1],10));q=r.exec(u)}var r=/\.([^/[]+)/g;var q=r.exec(u);var s=[];while(q!=null){s.push(q[1]);q=r.exec(u)}if(k.length!=s.length){return}s.unshift(i);var n=j;for(var m=0;m<s.length;m++){var w=s[m];var l=false;if(m==s.length-1){l=true}if(l){n[w]=v;return}var t=-1;if(!l){t=k[0];k.shift()}if(!(w in n)){n[w]=[]}n=n[w];for(var p=n.length;p<(t+1);p++){n.push({})}n=n[t]}})}for(var i in j){a[i]=j[i]}if(b!=""){var e=$.ajax({url:b,type:"POST",async:false,contentType:"application/json;charset=utf-8;",dataType:"json",data:JSON.stringify(a)}).responseText;a=JSON.parse(e)}return a}};